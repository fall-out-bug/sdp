{
  "version": "v1",
  "artifact": "kubeopencode-upstream-pr-candidate-plan",
  "issue_id": "sdp_dev-2aq.7.2",
  "references": {
    "fit_gap": "specs/runtime/kubeopencode-sdp-fit-gap.json",
    "adapter_contract": "specs/runtime/kubeopencode-sdp-adapter-contract.json",
    "internal_boundary": "docs/KUBEOPENCODE_SDP_INTERNAL_HARDENING_PATCHSET.md",
    "plan_doc": "docs/KUBEOPENCODE_UPSTREAM_PR_CANDIDATE_PLAN.md"
  },
  "upstream_repo": "kubeopencode/kubeopencode",
  "maintainer_stakeholders": [
    {
      "group": "repo-maintainers",
      "role": "merge_authority",
      "acceptance_focus": "scope_fit_and_roadmap_alignment"
    },
    {
      "group": "controller-maintainers",
      "role": "runtime_behavior_review",
      "acceptance_focus": "reconciliation_and_backward_compatibility"
    },
    {
      "group": "api-reviewers",
      "role": "crd_contract_review",
      "acceptance_focus": "schema_additivity_and_defaulting_behavior"
    }
  ],
  "candidate_changes": [
    {
      "id": "UP-001",
      "name": "generic-retry-budget-and-terminal-reason-contract",
      "origin_gap_ids": [
        "RET-001"
      ],
      "priority": 1,
      "upstreamability": "high",
      "scope": {
        "adds_crd_fields": true,
        "breaking_change": false,
        "requires_private_policy": false
      }
    },
    {
      "id": "UP-002",
      "name": "multi-role-dependency-gating-primitives",
      "origin_gap_ids": [
        "MR-001"
      ],
      "priority": 2,
      "upstreamability": "medium",
      "scope": {
        "adds_crd_fields": true,
        "breaking_change": false,
        "requires_private_policy": false
      }
    },
    {
      "id": "UP-003",
      "name": "status-trace-linkage-fields",
      "origin_gap_ids": [
        "TRC-001"
      ],
      "priority": 3,
      "upstreamability": "medium",
      "scope": {
        "adds_crd_fields": true,
        "breaking_change": false,
        "requires_private_policy": false
      }
    }
  ],
  "acceptance_strategy": {
    "sequence": [
      "ship_up_001_first",
      "keep_changes_additive_and_opt_in",
      "include_backward_compatibility_proof",
      "separate_private_sdp_controls"
    ],
    "required_pr_evidence": [
      "api_diff",
      "controller_tests",
      "upgrade_notes",
      "traceability_link"
    ]
  },
  "first_pr_candidate": {
    "candidate_id": "UP-001",
    "title": "Add generic retry budget and terminal reason contract to Task API",
    "branch": "feat/retry-budget-terminal-reason",
    "status": "prepared",
    "traceability": {
      "beads_issue": "sdp_dev-2aq.7.2",
      "compare_url": "https://github.com/kubeopencode/kubeopencode/compare/main...sdp-contrib:feat/retry-budget-terminal-reason",
      "submission_command": "gh pr create --repo kubeopencode/kubeopencode --base main --head sdp-contrib:feat/retry-budget-terminal-reason --title \"Add generic retry budget and terminal reason contract to Task API\" --body-file docs/upstream/UP-001-pr-body.md"
    },
    "patch_outline": [
      "add_optional_retry_fields_under_task_spec",
      "add_terminal_reason_structure_under_task_status",
      "apply_retry_budget_logic_in_controller_with_default_passthrough",
      "add_tests_for_retry_exhaustion_and_terminal_reason",
      "document_migration_and_examples"
    ]
  },
  "explicit_exclusions": [
    "sdp_model_allowlist_policy",
    "sdp_private_risk_thresholds",
    "tenant_egress_and_boundary_controls",
    "private_evidence_redaction_and_internal_provenance_keys"
  ]
}
