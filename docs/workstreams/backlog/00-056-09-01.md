---
ws_id: "00-056-09"
feature_id: "F056"
title: "Evidence schema: approval_data and plan_data definitions"
status: "backlog"
priority: "P2"
depends_on: []
blocks: []
project_id: "00"
---

# 00-056-09: Evidence schema approval_data and plan_data

## Goal

### ðŸŽ¯ Goal

Add `approval_data` and `plan_data` definitions to `schema/evidence.schema.json` so the schema documents all event-type payloads emitted by the evidence layer (F056). Align with emitter: ApprovalEvent, PlanEventWithFeature, PlanEventForDesign, PlanEventForIdea.

## Context

Review finding sdp-zjfj: schema has generation_data, verification_data, decision_data, lesson_data but missing approval_data and plan_data. Adding them improves validation and documentation.

## Acceptance Criteria

- [x] AC1: approval_data definition added (target_branch, commit_sha, approved_by)
- [x] AC2: plan_data definition added (scope_files, action, feature_id, ws_count, question_count, summary, qa_pairs)
- [x] AC3: Schema remains valid JSON Schema draft-07
- [x] AC4: Existing evidence tests still pass

## Scope Files

**Implementation:**
- schema/evidence.schema.json (add definitions)

**Tests:**
- sdp-plugin/internal/evidence/*_test.go (no change required; verify they pass)

## Notes

- Definitions are documentation/validation only; Go code does not use the schema at runtime.
- Match fields to evidence/events.go ApprovalEvent and evidence/plan.go plan builders.

---

## Execution Report

| Step | Result |
|------|--------|
| Pre-build | âœ… PASSED |
| Guard | âœ… Activated 00-056-09 |
| Schema | approval_data and plan_data added to definitions |
| JSON | Valid; evidence tests PASS |
| Post-build | âœ… go test ./... -short |
| AC1 | approval_data: target_branch, commit_sha, approved_by |
| AC2 | plan_data: scope_files, action, feature_id, ws_count, question_count, summary, qa_pairs |
| AC3 | Valid draft-07 JSON Schema |
| AC4 | evidence package tests PASS |
