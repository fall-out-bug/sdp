# WS: Model Cooldowns

**Feature**: F079 - Model Routing & Economics
**ID**: 00-079-02
**Priority**: P0
**Depends on**: 00-079-01

## Goal
Add rate limiting and cooldowns between model API calls.

## Scope Files
- `src/sdp/model/cooldown.go` (NEW)
- `src/sdp/model/cooldown_test.go` (NEW)

## Acceptance Criteria
1. Per-model cooldown periods
2. Global rate limiting across all models
3. Configurable cooldown durations
4. Auto-backoff on rate limit errors
5. Thread-safe implementation
6. Tests for cooldown logic (>= 80% coverage)

## Out of Scope
- Model routing (00-079-01)
- Fallback chain (00-079-03)

## Implementation Notes
```go
type CooldownManager struct {
    lastCall   map[string]time.Time
    cooldowns  map[string]time.Duration
    globalRate time.Duration
    mu         sync.Mutex
}

func (c *CooldownManager) WaitForCooldown(ctx context.Context, model string) error
func (c *CooldownManager) RecordCall(model string)
```

## Test Strategy
- Unit tests for cooldown timing
- Test global rate limiting
- Verify thread safety
