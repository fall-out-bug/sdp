---
ws_id: "00-056-02"
feature_id: "F056"
title: "Design & Idea Instrumentation"
status: "completed"
priority: "P1"
depends_on: ["00-054-05"]
blocks: ["00-056-04"]
project_id: "00"
---

# 00-056-02: Design & Idea Instrumentation

## Goal

Instrument `@design` and `@idea` skills to emit plan events. Record decomposition decisions and requirements gathering.

## Context

`@design` creates workstreams (decomposition decisions, dependency graph). `@idea` gathers requirements (questions asked, answers in drive mode). Both are plan-phase events.

## Acceptance Criteria

- [x] AC1: `@design` completion emits `plan` event (WS count, dependency graph, architecture decisions)
- [x] AC2: `@idea` completion emits `plan` event (question count, requirements summary)
- [x] AC3: In drive mode, `@idea` records question-answer pairs in evidence
- [x] AC4: Plan events include feature_id and decomposition metadata
- [x] AC5: Tests for plan event emissions

## Scope Files

**Implementation:**
- sdp-plugin/cmd/sdp/parse.go (update — emit plan event after WS parsing)
- sdp-plugin/internal/evidence/emitter.go (update — add plan helpers)
- sdp-plugin/internal/evidence/emitter_test.go (update)

**Tests:**
- sdp-plugin/internal/evidence/emitter_test.go

## Notes

- ~1.5h work
- `@design` is a Claude skill but calls `sdp parse` — instrument there
- `@idea` has no CLI command yet — may need a new `sdp idea` command stub for evidence

---

## Execution Report

**Date:** 2026-02-15

### Goal Status: ACHIEVED

All 5 acceptance criteria verified and passing.

### Implementation Summary

All implementation was already in place from previous work:

1. **AC1**: `PlanEventForDesign()` in plan.go emits plan events with ws_count, metadata
2. **AC2**: `PlanEventForIdea()` in plan.go emits plan events with question_count, summary
3. **AC3**: `QAPair` struct and `qa_pairs` field in `PlanEventForIdea()` records Q&A pairs
4. **AC4**: Both functions include feature_id and decomposition metadata
5. **AC5**: Tests in plan_test.go cover all functions

### Self-Check Results

- Tests pass: PASS (go test ./internal/evidence/... -run TestPlan)
- Coverage >= 80%: PASS (evidence: 84.8%)
- No TODO/FIXME: PASS
- File sizes < 200 LOC: PASS (plan.go: 69 lines, plan_test.go: 51 lines)
