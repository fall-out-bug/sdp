---
ws_id: 00-009-01
feature_id: F009
status: backlog
priority: P2
size: M
depends_on: ["00-008-01"]
---

# 00-009-01: beads-bridge CronJob — bd ready → AgentRun CRD

Feature: F009 (sdp_dev-ktfr)

## Goal

Simple CronJob binary that polls `bd ready` for each project and creates AgentRun CRDs for ready issues. Replaces swarm-orchestrator + feature-orchestrator + NATS intake path.

## Scope Files

- `cmd/beads-bridge/main.go` — new (~50 LOC)
- `deploy/k8s/control/beads-bridge.yaml` — new CronJob manifest

## Acceptance Criteria

- [ ] Binary reads `project-registry.yaml` for project list
- [ ] For each project: runs `bd ready` (or calls beads Go API), gets ready issues
- [ ] For each ready issue without an existing AgentRun: creates AgentRun CRD
- [ ] AgentRun.spec populated: issueId, workstream, project label
- [ ] Idempotent: re-running doesn't create duplicate AgentRuns
- [ ] CronJob runs every 1 minute
- [ ] Test: mock bd output → verify AgentRun CRDs created

## Out of Scope

- Multi-project model routing (00-009-02)
- Deleting swarm-orchestrator (00-010-01)

## Implementation Notes

- Use `client-go` dynamic client or typed client to create AgentRun CRDs
- Check for existing AgentRun by label `sdp.dev/issue-id=<id>` before creating
- Could also use beads Go API directly instead of shelling out to `bd`
