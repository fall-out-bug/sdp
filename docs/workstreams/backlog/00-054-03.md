---
ws_id: "00-054-03"
feature_id: "F054"
title: "Evidence Schema v0.1"
status: "backlog"
priority: "P0"
depends_on: ["00-054-01"]
blocks: ["00-054-04"]
project_id: "00"
---

# 00-054-03: Evidence Schema v0.1

## Goal

Define the JSON Schema for evidence log events. Four event types: plan, generation, verification, approval.

## Context

From VISION.md: "Schema v0.1 (four event types: plan, generation, verification, approval). Provenance = generation event type."

This is the data contract for the entire evidence layer.

## Acceptance Criteria

- [ ] AC1: `schema/evidence.schema.json` defines base Event structure
- [ ] AC2: Four event types defined: `plan`, `generation`, `verification`, `approval`
- [ ] AC3: `generation` event includes provenance fields (model_id, model_version, prompt_hash)
- [ ] AC4: `verification` event includes pass/fail, gate_name, coverage
- [ ] AC5: All events share: id, type, timestamp, ws_id, commit_sha
- [ ] AC6: Hash chain field: `prev_hash` (SHA-256 of previous event)
- [ ] AC7: Schema registered in `schema/index.json`
- [ ] AC8: Go types generated/written matching the schema

## Scope Files

**Implementation:**
- schema/evidence.schema.json (new)
- schema/index.json (update)
- sdp-plugin/internal/evidence/types.go (new)
- sdp-plugin/internal/evidence/types_test.go (new)

**Tests:**
- sdp-plugin/internal/evidence/types_test.go

## Event Structure

```json
{
  "id": "evt-uuid",
  "type": "generation",
  "timestamp": "2026-02-08T12:00:00Z",
  "ws_id": "00-054-03",
  "commit_sha": "abc123",
  "prev_hash": "sha256-of-previous-event",
  "data": {
    "model_id": "claude-sonnet-4-20250514",
    "model_version": "20250514",
    "prompt_hash": "sha256-of-prompt",
    "files_changed": ["internal/evidence/types.go"]
  }
}
```

## Verification

```bash
# Schema validates
cd sdp-plugin && go test ./internal/evidence/... -v -cover
# Schema file exists and is valid JSON
python3 -c "import json; json.load(open('schema/evidence.schema.json'))"
```

## Notes

- ~1.5h work
- Keep schema minimal â€” we can add fields later
- Provenance is a `generation` event field, NOT a separate subsystem
- Hash chain = corruption detection, not tamper-proof (per expert feedback)
