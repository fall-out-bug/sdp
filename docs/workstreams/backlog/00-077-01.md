# WS: Hook Event System

**Feature**: F077 - Runtime Hooks Platform
**ID**: 00-077-01
**Priority**: P1
**Depends on**: -

## Goal
Create core hook event system with pub/sub pattern for runtime lifecycle events.

## Scope Files
- `src/sdp/hooks/event.go` (NEW)
- `src/sdp/hooks/event_test.go` (NEW)
- `src/sdp/hooks/registry.go` (NEW)

## Acceptance Criteria
1. Define hook event types (command, session, gateway)
2. Event bus with subscribe/publish pattern
3. Synchronous and asynchronous hook execution
4. Hook priority ordering
5. Error handling without crashing main flow
6. Tests for event system (>= 80% coverage)

## Out of Scope
- Specific hook implementations (00-077-02..04)
- Hook packaging (00-077-05)

## Implementation Notes
```go
type HookEvent struct {
    Type      string                 // "command:pre", "session:start", etc.
    Timestamp time.Time
    Payload   map[string]interface{}
}

type HookHandler func(event HookEvent) error

type HookRegistry struct {
    handlers map[string][]HookHandler
}

func (r *HookRegistry) Subscribe(eventType string, handler HookHandler, priority int)
func (r *HookRegistry) Publish(event HookEvent) error
```

## Test Strategy
- Unit tests for subscribe/publish
- Test priority ordering
- Test error isolation
