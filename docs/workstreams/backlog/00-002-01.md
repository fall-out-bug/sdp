---
ws_id: 00-002-01
feature_id: F002
feature: F002
status: backlog
priority: P0
size: M
depends_on: []
---

# 00-002-01: Extract sdp-evidence CLI with validate Subcommand

Feature: F002 (sdp_dev-63h)

## Goal

Extract evidence validation from `cmd/pr-gate` into a standalone `cmd/sdp-evidence` binary with `validate` subcommand. Zero K8s dependency.

## Scope Files

- `cmd/pr-gate/` — source
- `cmd/sdp-evidence/` — new (or rename)
- `internal/evidence/`
- `internal/artifact/`
- `internal/quality/` (relevant parts)

## Acceptance Criteria

- [x] New binary `sdp-evidence` (or `sdp evidence`) with `validate` subcommand
- [x] `sdp-evidence validate --evidence .sdp/evidence/run-123.json` exits 0 if valid, non-zero if invalid
- [x] No imports from k8s, adapter, orchestrator
- [x] Existing pr-gate validation logic preserved (or delegated to shared package)
- [x] `go build ./cmd/sdp-evidence` succeeds

## Out of Scope

- `inspect` subcommand (00-002-02)
- Goreleaser (00-002-03)
- Changing validation rules

## Implementation Notes

- Consider `cmd/sdp-evidence/main.go` with cobra/urfave
- Reuse `internal/evidence.Validate` and `internal/artifact` for provenance
- Keep pr-gate as thin wrapper if needed for CI, or deprecate in favor of sdp-evidence

---

### Review Results

**Reviewed by:** Cursor /review
**Date:** 2026-02-23

| # | Check | Status |
|---|-------|--------|
| 0 | Goal Achieved | PASS |
| 1 | Tests pass | PASS |
| 2 | Coverage >= 80% | PASS (evidence pkg 80.5%; CLI tests exec binary) |
| 3 | Regression | PASS |
| 4 | Linters (go vet) | PASS |
| 5 | Type hints | N/A (Go) |
| 6 | No TODO/FIXME | PASS |
| 7 | File size < 200 LOC | PASS (main.go 100) |
| 8 | Clean Architecture | PASS (no k8s/adapter imports) |
| 9 | Docstrings | PASS |
| 10 | Type annotations | N/A (Go) |
| 11 | Execution Report | N/A (impl exists, WS status backlog) |

**Verdict:** APPROVED
