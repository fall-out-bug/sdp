---
ws_id: 00-013-01
feature_id: F013
status: backlog
priority: P1
size: L
depends_on: ["00-005-01", "00-007-02", "00-010-01"]
---

# 00-013-01: E2E Test Harness — Create Issues, Verify PRs

Feature: F013 (sdp_dev-l6xx)

## Goal

Automated test harness that creates beads issues of varying complexity, waits for the swarm to produce PRs, and validates evidence envelopes.

## Scope Files

- `scripts/e2e_swarm_test.sh` — new (or Go binary)
- `internal/e2e/` — new: test helpers

## Acceptance Criteria

- [ ] Script creates N beads issues with different types (bugfix, feature, refactor)
- [ ] Waits for AgentRun CRDs to be created by beads-bridge
- [ ] Monitors AgentRun phases until Succeeded or Failed
- [ ] For each Succeeded run: validates evidence envelope with `sdp-evidence validate`
- [ ] For each Succeeded run: verifies PR was created
- [ ] Reports: N/M succeeded, with timing and model usage
- [ ] Can be run manually or in CI

## Out of Scope

- Fixing failures found during runs (00-013-02)
- Runbook documentation (00-013-03)

## Implementation Notes

- Start with a shell script that uses `bd`, `kubectl`, and `sdp-evidence`
- Graduate to a Go binary if the script gets complex
- Include a timeout per run (30 minutes) and overall timeout (4 hours for 10 runs)
