---
ws_id: 00-067-03
feature_id: F067
title: "Cursor/OpenCode Adapter Consistency"
status: backlog
priority: 0
depends_on: [00-067-02]
blocks: [00-067-08]
project_id: sdp
---

## Goal

Make all Cursor and OpenCode command adapters resolve to valid, canonical skill paths with zero dead references.

## Context

Adapter configs currently include path references that are stale or inconsistent with repository layout. This leads to runtime confusion in skill invocation.

## Acceptance Criteria

- [ ] AC1: Audit all adapter command files for path correctness
- [ ] AC2: Replace invalid references (`*.md` vs `*/SKILL.md`, missing directories, legacy paths)
- [ ] AC3: Add adapter link/path validation script runnable in CI
- [ ] AC4: Ensure `.cursor/commands/*` and `.opencode/*` only reference canonical skill definitions
- [ ] AC5: Update adapter READMEs with validated path conventions
- [ ] AC6: Add test case or CI job that fails on broken adapter references
- [ ] AC7: Confirm no adapter references non-existent `prompts/commands/*` paths

## Scope Files

```yaml
scope_files:
  - .cursor/commands/*.md
  - .opencode/commands/*.md
  - .opencode/opencode.json
  - .cursor/README.md
  - .opencode/README.md
  - .github/workflows/go-ci.yml                 # OR dedicated docs/adapter check workflow
  - scripts/validate-adapter-links.sh            # NEW (if shell-based validation)
```

## Implementation Notes

### Validation Rules

A reference is valid only if:
1. Path exists in repository
2. Target file is canonical (`prompts/skills/*/SKILL.md` or documented equivalent)
3. Path shape matches the integration contract

### Error Output

Validation script must print:
- adapter file
- broken reference
- recommended replacement

### Compatibility

Do not break existing command names; only fix target path semantics.

## Definition of Done

- [ ] Adapter references pass automated validation
- [ ] No broken or legacy path references remain
- [ ] AC1-AC7 met
