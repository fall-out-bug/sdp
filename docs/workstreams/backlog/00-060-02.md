---
ws_id: "00-060-02"
feature_id: "F060"
title: "Interface Contract Generation"
status: "backlog"
priority: "P1"
depends_on: ["00-060-01"]
blocks: ["00-060-03"]
project_id: "00"
---

# 00-060-02: Interface Contract Generation

## Goal

When shared boundaries are detected, generate explicit interface contract files that both features must respect.

## Context

Boundary detection (00-060-01) finds shared types. This WS generates `.contracts/` files that define the agreed interface. Both features build against the contract, not assumptions.

## Acceptance Criteria

- [ ] AC1: `sdp contract generate --features F054,F055` creates contract from shared boundaries
- [ ] AC2: Contract YAML includes: type name, fields, required_by (which features), status
- [ ] AC3: Contract placed in `.contracts/<shared-type>.yaml`
- [ ] AC4: `sdp contract lock` locks contract (prevents modification during implementation)
- [ ] AC5: Extend existing contract system (already has synthesize, lock, validate)
- [ ] AC6: Synthesis engine resolves field conflicts between features

## Scope Files

**Implementation:**
- sdp-plugin/cmd/sdp/contract.go (update — add generate subcommand)
- sdp-plugin/internal/collision/contract_gen.go (new)
- sdp-plugin/internal/collision/contract_gen_test.go (new)

**Tests:**
- sdp-plugin/internal/collision/contract_gen_test.go

## Notes

- ~2h work
- Reuses existing contract infrastructure (synthesize, lock, validate, verify)
- New: cross-feature contract generation (existing contracts are single-feature)
- Synthesis engine already handles conflict resolution — extend to cross-feature
