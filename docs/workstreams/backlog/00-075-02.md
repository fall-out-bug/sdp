---
ws_id: "00-075-02"
feature_id: "F075"
title: "WS: Deep Diagnostic Mode"
status: completed
priority: 2
size: MEDIUM
depends_on: []
blocks: []
---

# WS: Deep Diagnostic Mode

**Feature**: F075 - Self-Healing Doctor
**ID**: 00-075-02
**Priority**: P0
**Depends on**: 00-075-01

## Goal
Add `--deep` flag for comprehensive environment analysis beyond basic checks.

## Scope Files
- `sdp-plugin/cmd/sdp/doctor.go`
- `sdp-plugin/internal/doctor/doctor.go`
- `sdp-plugin/internal/doctor/doctor_deep.go`
- `sdp-plugin/internal/doctor/doctor_deep_deps.go`

## Acceptance Criteria
- [x] AC1: `sdp doctor --deep` runs extended checks beyond standard
- [x] AC2: Checks git hooks integrity (pre-commit, pre-push)
- [x] AC3: Validates skill files syntax (YAML frontmatter)
- [x] AC4: Checks for circular dependencies in workstreams
- [x] AC5: Validates Beads database integrity
- [x] AC6: Reports performance metrics (check duration)
- [x] AC7: Tests for deep checks (>= 80% coverage)

## Implementation Summary

Implemented `RunDeepChecks()` function that:
- `checkGitHooks()`: Validates presence and executability of pre-commit/pre-push hooks
- `checkSkillsSyntax()`: Validates SKILL.md files have YAML frontmatter
- `checkWorkstreamCircularDeps()`: Uses DFS to detect dependency cycles
- `checkBeadsIntegrity()`: Validates Beads database is readable and non-empty
- `checkConfigVersion()`: Validates config version field presence

## Test Coverage
- Unit tests in `doctor_deep_test.go`
- Coverage: 85.1% (exceeds 80% requirement)
