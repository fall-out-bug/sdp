---
ws_id: "00-057-02"
feature_id: "F057"
title: "sdp apply Command"
status: "backlog"
priority: "P1"
depends_on: ["00-054-05"]
blocks: ["00-057-04"]
project_id: "00"
---

# 00-057-02: sdp apply Command

## Goal

Implement `sdp apply` — execute workstreams from the terminal with streaming progress.

## Context

Currently execution requires Claude Code (`@build`/`@oneshot`). `sdp apply` is the standalone equivalent — orchestrates workstream execution with evidence recording.

## Acceptance Criteria

- [ ] AC1: `sdp apply` executes all ready workstreams (no blockers)
- [ ] AC2: `sdp apply --ws 00-054-01` executes specific workstream
- [ ] AC3: `sdp apply --retry 3` retries failed workstream up to N times
- [ ] AC4: `sdp apply --dry-run` shows execution plan without running
- [ ] AC5: Streaming progress: `[00-054-01] ████░░░░ 50% — running tests`
- [ ] AC6: `--output=json` for machine-readable progress events
- [ ] AC7: Respects dependency order from workstream specs
- [ ] AC8: Emits full evidence chain (plan + generation + verification + approval)

## Scope Files

**Implementation:**
- sdp-plugin/cmd/sdp/apply.go (new)
- sdp-plugin/internal/executor/executor.go (new)
- sdp-plugin/internal/executor/progress.go (new — streaming output)
- sdp-plugin/internal/executor/executor_test.go (new)
- sdp-plugin/cmd/sdp/main.go (update — register command)

**Tests:**
- sdp-plugin/internal/executor/executor_test.go

## Notes

- ~2.5h work
- Uses existing dependency graph and parallel dispatcher
- Progress: ANSI escape codes for terminal, JSON for `--output=json`
- Retry logic: only retry the failed workstream, not the whole pipeline
