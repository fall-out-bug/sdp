---
ws_id: 00-051-06
feature_id: F051
title: "Agent Coordination: Requirement Verification"
status: backlog
priority: 0
depends_on: [00-051-04]
blocks: []
project_id: sdp
beads_id: sdp-6fx.7
---

## Goal

Implement continuous requirement verification to ensure implementation matches specifications.

## Context

Part of F051 Long-term Memory System. Continuously verifies that code changes don't violate documented requirements.

**Related Beads:** sdp-6fx.7 (Continuous requirement verification)

## Acceptance Criteria

- [ ] AC1: Parse requirements from workstream specs
- [ ] AC2: Verify requirements before agent task completion
- [ ] AC3: Flag violations with severity (error, warning, info)
- [ ] AC4: Support custom verification rules
- [ ] AC5: Integration with drift detection for cross-validation

## Scope Files

```yaml
scope_files:
  - sdp-plugin/internal/coordination/verifier.go        # NEW
  - sdp-plugin/internal/coordination/verifier_test.go   # NEW
  - sdp-plugin/internal/coordination/rules.go           # NEW
  - sdp-plugin/internal/coordination/rules_test.go      # NEW
  - sdp-plugin/cmd/sdp/verify.go                        # NEW
```

## Implementation Notes

### Verification Pipeline

```go
type VerificationPipeline struct {
    Rules []VerificationRule
}

type VerificationRule interface {
    Name() string
    Verify(ctx context.Context, spec *WorkstreamSpec, code *CodeSnapshot) (*VerificationResult, error)
}

type VerificationResult struct {
    RuleName string
    Status   string // pass, fail, skip
    Message  string
    Details  []string
}
```

### Built-in Rules

1. **AC Coverage** - All acceptance criteria have corresponding tests
2. **Scope Boundaries** - Code changes only touch scope_files
3. **Dependency Check** - No new dependencies without approval
4. **LOC Limit** - Files don't exceed 200 LOC

### Integration Points

- Called before `sdp guard complete`
- Called during `@review` phase
- Emits verification events to coordination log

## Definition of Done

- [ ] All AC met
- [ ] Tests pass with â‰¥80% coverage
- [ ] CLI command: `sdp verify <ws-id>`
- [ ] Rules are extensible
