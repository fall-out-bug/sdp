---
ws_id: 00-067-05
feature_id: F067
title: "Quality Gate Enforcement Alignment"
status: backlog
priority: 0
depends_on: [00-067-04]
blocks: [00-067-06, 00-067-08]
project_id: sdp
---

## Goal

Make quality gates consistent and truly blocking across docs, `.sdp` configs, and CI implementation.

## Context

Current configuration declares strong gates but CI behavior is partially permissive (`|| true`, lower threshold mismatch). This undermines the trust model of SDP execution.

## Acceptance Criteria

- [ ] AC1: Align declared coverage threshold across docs/config/CI
- [ ] AC2: Remove permissive CI bypasses for guard checks where blocking is expected
- [ ] AC3: Ensure guard mode/severity handling is explicit for local vs CI
- [ ] AC4: Ensure CI emits actionable failures (not silent passes)
- [ ] AC5: Add policy contract section describing which gates block merge
- [ ] AC6: Validate all quality checks run in expected working directories
- [ ] AC7: Add regression check to prevent reintroduction of permissive bypasses

## Scope Files

```yaml
scope_files:
  - .github/workflows/go-ci.yml
  - .sdp/config.yml
  - .sdp/guard-rules.yml
  - docs/reference/quality-gates.md
  - docs/reference/configuration.md
  - docs/reference/build-spec.md
  - docs/reference/review-spec.md
```

## Implementation Notes

### Blocking Contract

Document per gate:
- Command
- Threshold
- Blocking behavior (yes/no)
- Local behavior vs CI behavior

### Required Cleanup

Remove or justify:
- `|| true` for blocking checks
- mismatched thresholds between CI and docs
- ambiguous language around "warning" vs "block"

### Guard Policy

Ensure `.sdp/guard-rules.yml` remains canonical and CI consumes the same source.

## Definition of Done

- [ ] CI gate behavior matches documented policy
- [ ] Blocking checks fail builds deterministically
- [ ] No threshold mismatch remains between docs/config/workflows
- [ ] AC1-AC7 met
