---
ws_id: "00-057-01"
feature_id: "F057"
title: "sdp plan Command"
status: "backlog"
priority: "P1"
depends_on: ["00-054-05"]
blocks: ["00-057-04"]
project_id: "00"
---

# 00-057-01: sdp plan Command

## Goal

Implement `sdp plan <description>` — decompose a feature description into workstreams from the terminal.

## Context

Currently planning requires Claude Code (`@feature`). This makes SDP accessible to any terminal user or CI pipeline. Internally orchestrates `@idea` + `@design` but via CLI.

## Acceptance Criteria

- [ ] AC1: `sdp plan "Add OAuth2"` outputs decomposition (workstreams, deps, estimates)
- [ ] AC2: `sdp plan "Add OAuth2" --interactive` asks questions (drive mode)
- [ ] AC3: `sdp plan "Add OAuth2" --auto-apply` plans then executes (ship mode)
- [ ] AC4: Creates workstream files in `docs/workstreams/backlog/`
- [ ] AC5: Emits `plan` event to evidence log
- [ ] AC6: `--output=json` for machine-readable output
- [ ] AC7: `--dry-run` shows what would be created without writing files
- [ ] AC8: Error with clear message if no model API configured

## Scope Files

**Implementation:**
- sdp-plugin/cmd/sdp/plan.go (new)
- sdp-plugin/internal/planner/planner.go (new)
- sdp-plugin/internal/planner/planner_test.go (new)
- sdp-plugin/cmd/sdp/main.go (update — register command)

**Tests:**
- sdp-plugin/internal/planner/planner_test.go

## Notes

- ~2h work
- `sdp plan` calls the decomposition engine (already built in Go)
- Interactive mode: read questions from stdin, print to stdout
- This is the new "front door" for non-IDE users
