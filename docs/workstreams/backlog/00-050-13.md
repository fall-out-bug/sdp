---
ws_id: 00-050-13
parent: sdp-79u
feature: F050
status: backlog
size: LARGE
project_id: 00
---

## WS-00-050-13: Python Code Removal

### üéØ Goal

Remove obsolete Python code after successful Go migration. Delete 25K LOC of Python code, keeping only `.claude/skills/`, `.claude/agents/`, `docs/`, and `prompts/`.

**What must WORK after completing this WS:**
- All Python code deleted (25K LOC removed)
- Go binary works flawlessly (all tests pass)
- Documentation updated (no Python references)
- `.gitignore` updated (no Python artifacts)
- Python code archived to `python-legacy` branch

**Acceptance Criteria:**
- [ ] AC1: All Python code deleted from `src/sdp/`
- [ ] AC2: Go binary verified working (all tests pass)
- [ ] AC3: Documentation updated (remove Python references)
- [ ] AC4: `.gitignore` updated (remove Python artifacts)
- [ ] AC5: Python code archived to `python-legacy` branch
- [ ] AC6: Release tagged `v1.0.0-go`
- [ ] Coverage ‚â• 80%

**‚ö†Ô∏è WS is NOT complete until Goal is achieved (all AC ‚úÖ).**

---

### üìã Contracts

**Technical Constraints:**
- MUST verify Go works perfectly before deletion
- MUST create backup branch before deletion
- MUST tag release after migration
- MUST update all documentation

---

### üìÅ Scope Files

**Files to DELETE:**
```
src/sdp/adapters/          # Not needed (skills/ handle integration)
src/sdp/beads/             # Replaced by internal/beads/wrapper.go
src/sdp/cli/               # Replaced by cmd/sdp/
src/sdp/core/              # Replaced by internal/core/
src/sdp/design/            # Beads handles dependencies
src/sdp/doctor.py          # Replaced by cmd/sdp/commands/doctor.go
src/sdp/errors/            # Go error handling
src/sdp/extensions/        # Not needed
src/sdp/feature/           # skills/ handle this
src/sdp/health_checks/     # sdp doctor replacement
src/sdp/init_*.py          # sdp init replacement
src/sdp/prd/               # Keep for now (product vision)
src/sdp/quality/           # internal/quality/ replacement
src/sdp/report/            # telemetry handles this
src/sdp/schema/            # internal/core/schema.go replacement
src/sdp/tdd/               # internal/tdd/ replacement
src/sdp/traceability/      # drift detector covers this
src/sdp/unified/           # Partially replaced (checkpoint simplified)
src/sdp/validators/        # internal/validators/ replacement
pyproject.toml
poetry.lock
tests/
```

**Files to KEEP:**
```
.claude/skills/            # Core SDP functionality (prompts)
.claude/agents/            # Multi-agent prompts
docs/                      # Documentation
hooks/                     # Git hooks (may need Go rewrite later)
prompts/commands/          # Skill definitions (markdown)
README.md                  # Update with Go instructions
CLAUDE.md                  # Update with Go instructions
```

---

### ‚úÖ Testing

**Pre-Deletion Verification:**
```bash
# 1. Verify Go binary works
./sdp doctor || { echo "Go binary broken! Aborting."; exit 1; }
./sdp --version

# 2. Run all Go tests
go test ./... -v -cover

# 3. Test all commands
./sdp init test-project
./sdp build 00-050-13
./sdp quality check
./sdp telemetry insights

# 4. Verify all workstreams can execute
# (Test with real workstreams)
```

**Post-Deletion Verification:**
```bash
# 1. Verify Python files deleted
ls src/sdp/  # Should be empty or not exist

# 2. Verify Go binary still works
./sdp doctor
./sdp --version

# 3. Run all Go tests again
go test ./... -v -cover

# 4. Verify git status
git status
# Should show deletions only
```

---

### üîç Verification

**Pre-build:**
- [ ] Review file deletion list
- [ ] Verify backup branch creation
- [ ] Check documentation updates
- [ ] Test .gitignore changes

**Post-build:**
```bash
# Execution script (cleanup-python.sh)
#!/bin/bash

# 1. Verify Go works
./sdp doctor || { echo "Go binary broken! Aborting."; exit 1; }
./sdp --version

# 2. Backup Python code
git checkout -b python-legacy
git push origin python-legacy

# 3. Return to main
git checkout main

# 4. Delete Python code
git rm -r src/sdp/
git rm pyproject.toml poetry.lock
git rm tests/

# 5. Update documentation
# Edit README.md, CLAUDE.md (remove Python references)

# 6. Commit
git commit -m "feat: migrate to Go implementation

- Replace Python CLI with Go binary
- Remove 25K LOC Python code
- Leverage Beads CLI for task tracking
- Single static binary for easy deployment

BREAKING CHANGE: Python runtime no longer required"

# 7. Tag release
git tag v1.0.0-go
git push origin main --tags

echo "‚úÖ Python cleanup complete. Go binary is now the only implementation."
```

---

### üìù Notes

**Dependencies:** 00-050-12 (all Go features verified)

**Context:**
Final migration step (3000 LOC deleted). CRITICAL: Verify Go works perfectly before deletion.

**Key Decisions:**
- Archive Python code to `python-legacy` branch
- Tag release `v1.0.0-go`
- Update all documentation (remove Python references)
- Keep `.claude/skills/`, `.claude/agents/`, `docs/`, `prompts/`

**Risks:**
- Go binary has bugs
- Python code needed for some features
- Documentation not fully updated
- Git operations fail

**Mitigations:**
- Comprehensive pre-deletion testing
- Backup branch creation
- Documentation audit (Python ‚Üí Go)
- Test git operations in safe branch first

**Critical Pre-Deletion Checklist:**
- [ ] All Go tests pass (‚â•80% coverage)
- [ ] All commands work (init, doctor, build, quality, telemetry)
- [ ] All skills work with Go binary
- [ ] Beads integration functional
- [ ] @oneshot executes autonomously
- [ ] Cross-platform builds succeed
- [ ] Documentation updated
- [ ] Backup branch created

**Post-Deletion Checklist:**
- [ ] Python files deleted
- [ ] Go binary verified working
- [ ] All tests pass again
- [ ] Git push succeeds
- [ ] Release tagged
- [ ] Documentation verified

**Documentation Updates Required:**
- README.md: Remove Python installation, add Go binary download
- CLAUDE.md: Update skill examples to use Go binary
- docs/PROTOCOL.md: Remove Python references
- docs/reference/MODELS.md: Update to Go implementation
- CONTRIBUTING.md: Update development setup

**Migration Announcement:**
```markdown
# Breaking Change: Go Migration

SDP has migrated from Python to Go. Python code is now archived in the `python-legacy` branch.

## Migration Guide

### Users
- Download Go binary from GitHub releases
- No Python runtime required
- Single static binary for easy deployment

### Developers
- Go 1.21+ required
- No Python dependencies
- See DEVELOPMENT.md for setup instructions

### Python Users
- Python code archived in `python-legacy` branch
- No longer maintained
- Switch to Go binary for continued support
```

**Rollback Plan:**
If Go version has critical issues:
```bash
# 1. Stop using Go binary
rm /usr/local/bin/sdp

# 2. Restore Python version
git checkout python-legacy
pip install -e .

# 3. Report bug
# GitHub issue with reproduction
# Tag: critical, go-migration
```

**Success Metrics:**
- All Python CLI commands work in Go
- All skills work with Go binary
- Beads integration functional
- @oneshot executes autonomously
- Binary size ‚â§20MB
- Zero data loss (checkpoints, telemetry)

**Lessons Learned:**
- Go reduces LOC (25K ‚Üí ~5K)
- Go performance better (parallel execution)
- Go deployment simpler (single binary)
- Beads integration reduces complexity
- Skills remain unchanged (prompts are language-agnostic)

**Future Work:**
- Rewrite hooks in Go (currently shell scripts)
- Implement Go-based skill runner
- Add Go SDK for SDP (not just CLI)
- Performance benchmarking (Go vs Python)
