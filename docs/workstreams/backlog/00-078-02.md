---
ws_id: "00-078-02"
feature_id: "F078"
title: "WS: Degraded Mode Behavior"
status: backlog
priority: 2
size: MEDIUM
depends_on: []
blocks: []
---

# WS: Degraded Mode Behavior

**Feature**: F078 - Resilient Runtime Layer
**ID**: 00-078-02
**Priority**: P0
**Depends on**: 00-078-01

## Goal
Add degraded mode behavior for graceful degradation when external services are unavailable.

## Scope Files
- `src/sdp/runtime/degraded.go` (NEW)
- `src/sdp/runtime/degraded_test.go` (NEW)

## Acceptance Criteria
1. Detect when external services (model API) are unavailable
2. Switch to degraded mode with reduced functionality
3. Cache results for offline operation
4. Log degraded mode status
5. Auto-recovery when service restored
6. Tests for degraded mode (>= 80% coverage)

## Out of Scope
- Retry logic (00-078-01)

## Implementation Notes
```go
type DegradedMode struct {
    Active      bool
    Reason      string
    Since       time.Time
    CachedItems map[string]interface{}
}

func CheckServiceHealth(ctx context.Context, endpoint string) error
func EnterDegradedMode(reason string) *DegradedMode
func ExitDegradedMode()
```

## Test Strategy
- Unit tests for mode transitions
- Test cache behavior
- Verify auto-recovery
