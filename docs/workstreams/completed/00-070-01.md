---
ws_id: 00-070-01
feature_id: F070
title: "Failure Taxonomy and Error Codes"
status: completed
priority: 0
size: SMALL
depends_on: [00-069-05]
blocks: [00-070-02, 00-070-03, 00-070-04, 00-070-05]
project_id: sdp
completed_at: 2026-02-16
---

## Goal

Define a stable failure taxonomy and error-code contract for all critical execution paths.

## Context

Recovery UX depends on reliable classification of failure causes.

## Acceptance Criteria

- [x] AC1: Define failure classes (environment, protocol, dependency, validation, runtime)
- [x] AC2: Assign canonical error codes and user-facing copy style
- [x] AC3: Map each class to recommended recovery patterns
- [x] AC4: Add error-code table to reference docs
- [x] AC5: Add contract tests for error serialization

## Scope Files

```yaml
scope_files:
  - sdp-plugin/internal/errors/taxonomy.go
  - sdp-plugin/internal/errors/serialize.go
  - sdp-plugin/internal/errors/taxonomy_test.go
  - sdp-plugin/internal/errors/serialize_test.go
  - docs/reference/errors.md
```

## Implementation Summary

Created `internal/errors` package with:
- 5 error classes: ENV, PROTO, DEP, VAL, RUNTIME
- 38 error codes with messages and recovery hints
- SDPError type with context support
- JSON serialization with contract tests
- Reference documentation

## Definition of Done

- [x] Error taxonomy is documented and test-covered (95.8% coverage)
- [x] New failures can be categorized without ad-hoc messaging
- [x] AC1-AC5 complete
