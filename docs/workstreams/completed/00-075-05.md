---
ws_id: 00-075-05
feature_id: F075
title: "Automatic Rollback on Failure"
status: completed
priority: 0
size: SMALL
depends_on: [00-075-04]
blocks: [00-075-06]
project_id: sdp
---

## Goal

Implement `sdp doctor --rollback <backup-path>` to restore config from backup files.

## Context

If a migration causes issues, users need a simple way to restore their previous config.

## Acceptance Criteria

- [x] AC1: Add `--rollback <path>` flag to doctor command
- [x] AC2: Restore config from specified backup file
- [x] AC3: Validate backup file exists before restore
- [x] AC4: Clear error message if backup not found
- [x] AC5: List available backups with helper function

## Scope Files

```yaml
scope_files:
  - sdp-plugin/internal/doctor/doctor_migrate.go
  - sdp-plugin/internal/doctor/doctor_migrate_ops.go
  - sdp-plugin/cmd/sdp/doctor.go
```

## Definition of Done

- [x] Rollback restores config from any backup
- [x] Test coverage >= 80%
- [x] Clear error handling for missing backups
