---
ws_id: "00-057-15"
feature_id: "F057"
title: "Update workflow tests to require invalid gate failure"
status: complete
priority: "P1"
depends_on: []
blocks: []
project_id: "00"
---

# 00-057-15: Update workflow tests to require invalid gate failure

## Goal

Update the test workflow to explicitly test that invalid gate names cause workflow failure, and that failed gates fail the workflow independent of the PR comment step.

## Context

The test-verify-action.yml workflow currently has:
- `continue-on-error: true` for the "Test error handling - invalid gate" test
- This needs to be removed so the test asserts the workflow fails on invalid gates

## Acceptance Criteria

- [x] AC1: Remove `continue-on-error: true` from invalid gate test
- [x] AC2: Add explicit assertion that workflow fails when gates fail
- [x] AC3: Test verifies exit code 1 for invalid gates
- [x] AC4: Test verifies exit code 1 for legitimate gate failures

## Implementation Notes

- Removed `continue-on-error: true` from "Test error handling - invalid gate" job
- Changed verification step name from "Verify action handles invalid gate gracefully" to "Verify action fails on invalid gate"
- Updated verification logic: if test succeeds (doesn't fail), the workflow explicitly fails with exit 1
- The test ensures that invalid gate names cause the action to exit with non-zero code

## Verification

Commit: `3ea29c9` - "feat(tests): require workflow failure on invalid gates"

## Scope Files

**Implementation:**
- `.github/workflows/test-verify-action.yml` (modify)
  - Remove `continue-on-error: true` from "Test error handling - invalid gate" job
  - Add assertion step that verifies previous step failed

**Verification:**
- Push changes and verify CI fails appropriately
- Check that invalid gate test causes workflow to fail with exit code 1
- Check that legitimate gate failures also cause workflow to fail

## Notes

- Current test name: "Test error handling - invalid gate"
- Line ~100: `continue-on-error: true`
- The test should FAIL the workflow when invalid gate is used
