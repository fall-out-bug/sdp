---
ws_id: "00-056-02"
feature_id: "F056"
title: "Design & Idea Instrumentation"
status: "backlog"
priority: "P1"
depends_on: ["00-054-05"]
blocks: ["00-056-04"]
project_id: "00"
---

# 00-056-02: Design & Idea Instrumentation

## Goal

### ðŸŽ¯ Goal

Instrument `@design` and `@idea` skills to emit plan events. Record decomposition decisions and requirements gathering.

## Context

`@design` creates workstreams (decomposition decisions, dependency graph). `@idea` gathers requirements (questions asked, answers in drive mode). Both are plan-phase events.

## Acceptance Criteria

- [x] AC1: `@design` completion emits `plan` event (WS count, dependency graph, architecture decisions)
- [x] AC2: `@idea` completion emits `plan` event (question count, requirements summary)
- [x] AC3: In drive mode, `@idea` records question-answer pairs in evidence
- [x] AC4: Plan events include feature_id and decomposition metadata
- [x] AC5: Tests for plan event emissions

## Scope Files

**Implementation:**
- sdp-plugin/cmd/sdp/parse.go (update â€” emit plan event after WS parsing)
- sdp-plugin/internal/evidence/emitter.go (update â€” add plan helpers)
- sdp-plugin/internal/evidence/emitter_test.go (update)

**Tests:**
- sdp-plugin/internal/evidence/emitter_test.go

## Notes

- ~1.5h work
- `@design` is a Claude skill but calls `sdp parse` â€” instrument there
- `@idea` has no CLI command yet â€” may need a new `sdp idea` command stub for evidence

---

### Execution Report

- **Completed:** 2026-02-10
- **Artifacts:** parse.go emits PlanEventWithFeature after WS parsing; emitter.go: PlanEventWithFeature, PlanEventForDesign, PlanEventForIdea, QAPair; design.go: `sdp design record --feature F056 --ws-count N`; idea.go: `sdp idea record --feature F056 --questions N --summary "..." --qa "Q|A"`; emitter_test.go: TestPlanEventWithFeature, TestPlanEventForDesign, TestPlanEventForIdea.
- **Verification:** go build and go test ./internal/evidence pass.
- **Post-build:** Go build and test in sdp-plugin.
