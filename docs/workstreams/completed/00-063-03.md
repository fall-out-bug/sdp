---
ws_id: "00-063-03"
feature_id: "F063"
title: "Guard Configuration and Gate Alignment"
status: "completed"
priority: "P1"
depends_on: ["00-063-01"]
blocks: ["00-063-04"]
project_id: "00"
completed_at: "2026-02-16"
---

# 00-063-03: Guard Configuration and Gate Alignment

## Goal

Introduce dedicated guard rules config and align guard/quality expectations across CLI, docs, and CI.

## Acceptance Criteria

- [x] AC1: `.sdp/guard-rules.yml` is supported as canonical rules source
- [x] AC2: Rule schema/validation errors are explicit and actionable
- [x] AC3: `.sdp/config.yml` references guard policy settings (mode, severity mapping)
- [x] AC4: Documentation clearly defines local vs CI behavior and exit codes
- [x] AC5: CI workflow consumes the same rule source as local runs
- [x] AC6: No duplicate rule definitions between docs and runtime defaults

## Implementation

**Files changed:**
- `sdp-plugin/internal/config/project_guard.go` - GuardRules struct, LoadGuardRules(), validateGuardRules()
- `sdp-plugin/internal/config/project.go` - GuardSection in config
- `sdp-plugin/internal/config/project_test.go` - Tests for guard config
- `.sdp/guard-rules.yml` - Canonical rules source
- `.sdp/config.yml` - Guard policy section
- `docs/reference/quality-gates.md` - Local vs CI behavior (AC4)
- `.github/workflows/go-ci.yml` - Guard checks job (AC5)

## Tests

Coverage: 86.3% for config package

## Notes

- Canonical rules source is `.sdp/guard-rules.yml`
- Falls back to DefaultGuardRules() if file missing
- Validation errors are explicit and actionable
- CI and local use same rules file
