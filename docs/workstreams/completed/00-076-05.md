---
ws_id: "00-076-05"
feature_id: "F076"
title: "WS: Headless Mode for Scripts/CI"
status: completed
priority: 2
size: SMALL
depends_on: []
blocks: []
---

# WS: Headless Mode for Scripts/CI

**Feature**: F076 - Guided Onboarding Wizard
**ID**: 00-076-05
**Priority**: P0
**Depends on**: 00-076-03, 00-076-04

## Goal
Add headless mode designed for CI/CD pipelines and scripts with JSON output and exit codes.

## Scope Files
- `sdp-plugin/cmd/sdp/init.go`
- `sdp-plugin/internal/sdpinit/headless.go` (NEW)
- `sdp-plugin/internal/sdpinit/headless_test.go` (NEW)

## Acceptance Criteria
1. `sdp init --headless --output=json` produces machine-readable output
2. Exit codes: 0=success, 1=error, 2=validation failed
3. All configuration options available via flags
4. Pre-flight failures reported in JSON format
5. Tests for headless mode (>= 80% coverage)

## Out of Scope
- Interactive mode (00-076-02)

## Implementation Notes
```go
type HeadlessOutput struct {
    Success     bool           `json:"success"`
    Error       string         `json:"error,omitempty"`
    ProjectType string         `json:"project_type"`
    Created     []string       `json:"created"`
    Preflight   *PreflightResult `json:"preflight,omitempty"`
}

func RunHeadless(cfg Config) (*HeadlessOutput, error) {
    // Run preflight, apply defaults, create structure
    // Return JSON-serializable result
}
```

## Test Strategy
- Unit tests for headless output format
- Integration test with JSON parsing
- Verify exit codes
