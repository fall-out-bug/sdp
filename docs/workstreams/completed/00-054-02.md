---
ws_id: "00-054-02"
feature_id: "F054"
title: "Project Config File"
status: "completed"
priority: "P0"
depends_on: []
blocks: ["00-054-06"]
project_id: "00"
---

# 00-054-02: Project Config File (.sdp/config.yml)

## Goal

Create a project-level config file for SDP settings. First consumer: acceptance test gate configuration.

## Context

Currently SDP has user-level config (~/.config/sdp/) but no project-level config. Acceptance test gate needs per-project settings (test command, timeout, expected output).

## Acceptance Criteria

- [ ] AC1: `.sdp/config.yml` schema defined in `schema/config.schema.json`
- [ ] AC2: Config loader reads `.sdp/config.yml` from project root
- [ ] AC3: Config loader returns typed struct with defaults
- [ ] AC4: Fallback: if no config file, all features use sensible defaults
- [ ] AC5: Acceptance test section defined: `acceptance.command`, `acceptance.timeout`, `acceptance.expected`
- [ ] AC6: `sdp doctor` validates config file if present

## Scope Files

**Implementation:**
- schema/config.schema.json (new)
- sdp-plugin/internal/config/project.go (new)
- sdp-plugin/internal/config/project_test.go (new)
- sdp-plugin/cmd/sdp/doctor.go (update — validate config)

**Tests:**
- sdp-plugin/internal/config/project_test.go

## Config Shape

```yaml
# .sdp/config.yml
version: 1

acceptance:
  command: "go test ./... -run TestSmoke"
  timeout: 30s
  expected: "PASS"

evidence:
  enabled: true
  log_path: ".sdp/log/events.jsonl"

quality:
  coverage_threshold: 80
  max_file_loc: 200
```

## Verification

```bash
cd sdp-plugin && go test ./internal/config/... -v -cover
# Coverage >= 80%
```

## Notes

- ~1.5h work
- Keep it simple: YAML parsing, struct defaults, validation
- `evidence` and `quality` sections can be empty stubs — WS-04 and WS-06 will fill them
