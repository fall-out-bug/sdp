# SDP v0.9.8 — Evidence Before Push

> *"AI agents can implement features, but without evidence it's just vibes."*

---

## TL;DR

- **Git hooks** — pre-commit (`go build`), pre-push (`go test -short`, evidence gate)
- **Skills sync** — @build closes beads, @design verifies scope, @review handoff on CHANGES_REQUESTED
- **Guard strict** — no more `|| true` escape hatches; evidence + checkpoint committed with PR
- **Installer** — sha256 mandatory, binary-only mode documented
- **Protocol boundary** — non-protocol docs migrated to sdp_dev; `docs/reference/` stays lean

---

## What's New

### Git Hooks: Fail Fast, Fail Local

Two hooks. Zero excuses.

| Hook | Runs | When |
|------|------|------|
| **pre-commit** | `go build ./...` | Every commit |
| **pre-commit** | ws-verdict schema validation | When `docs/ws-verdicts/*.json` touched |
| **pre-push** | `go test -short ./...` | Every push |
| **pre-push** | evidence validation | Feature branch + `internal/` or `cmd/` changed |

Install: `scripts/hooks/install-git-hooks.sh` → symlinks `.git/hooks/pre-commit`, `.git/hooks/pre-push`.

Catch broken builds and missing evidence *before* CI. Your future self thanks you.

### Skills ↔ Beads: Closed Loop

- **@build** — Post-build `bd close` for beads in WS frontmatter; batch `/build 00-XXX-YY..ZZ`
- **@design** — Pre-draft check, bead verification, default-in-scope
- **@review** — Handoff block when CHANGES_REQUESTED (fix loop, don't orphan)

CLAUDE.md syncs with sdp_dev/AGENTS.md — placement rules, "продолжай" convention.

### Evidence + Checkpoint: No Escape

- **@build** step 3b — Commit evidence + checkpoint after `sdp-orchestrate --advance`
- **.gitignore** — `!.sdp/evidence/`, `!.sdp/checkpoints/` (evidence ships with PR)
- **sdp guard** — `deactivate` and `activate` are blocking; no `|| true`
- **go-ci** — `sdp contract validate` blocks on failure

Evidence is not optional. It's the proof layer.

### Installer: Security First

- **install.sh** — Fails when no sha256 tool; never skips checksum verification
- **install-project.sh** — Clear retry command on CLI install failure
- **README, QUICKSTART** — Binary-only vs full project install modes documented

### Protocol Boundary

- Removed non-protocol docs (workstreams, roadmap, plans) → migrated to sdp_dev
- Kept `docs/reference/` — PRINCIPLES, GLOSSARY, build/design/review specs
- Added `docs/README.md` index
- **CheckCoverage(ctx)** — Context propagation for cancellation
- **ws-verdict, review-verdict** — JSON schemas for build and review outputs

---

## Install

```bash
curl -sSL https://raw.githubusercontent.com/fall-out-bug/sdp/main/install.sh | sh
# Or binary only:
curl -sSL https://raw.githubusercontent.com/fall-out-bug/sdp/main/install.sh | sh -s -- --binary-only
```

**Testing:** `SDP_REF=v0.9.8` | **OpenCode:** `SDP_IDE=opencode` or `SDP_IDE=all`

---

## Full Changelog

See [CHANGELOG.md](../../CHANGELOG.md).
